{"version":3,"sources":["web/static/vendor/active_admin.js","web/static/vendor/active_admin_lib.js","web/static/vendor/best_in_place.js","web/static/vendor/best_in_place.purr.js","web/static/vendor/jquery-ujs.js.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9sBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"priv/static/js/ex_admin_common.js","sourcesContent":["//= require active_admin/base\n//= require jquery\n//= require jquery-ui\n//= require jquery-migrate-1.1.1\n\n// TODO: move this to a file provided by ace_contacts plugin\nfunction serializeCategories() {\n  var categoryIds = $.makeArray(\n    $(\"table.index_table .category\").map(function() {\n      return $(this).data('id');\n    })\n  );\n  return {ids: categoryIds};\n};\n\n$(document).ready(function(){\n  // Activating Best In Place\n  jQuery(\".best_in_place\").best_in_place();\n  //$('table.index_table tbody').sortable();\n  $('#backup-now').click(function(){\n    $('#title_bar').after(\"<div class='flashes'><div class='flash flash_info'>Creating backup. This may take a while ...</div></div>\");\n    return true;\n  });\n  $('.restore-link').click(function(e){\n    if (e.isPropagationStopped()) {\n      $('#title_bar').after(\"<div class='flashes'><div class='flash flash_info'>Restoring backup. This may take a while ...</div></div>\");\n    }\n    return true;\n  });\n  $('body.admin_categories table.index_table tbody').sortable({\n    update: function(){\n      $.ajax({\n        url: '/admin/categories/sort',\n        type: 'post',\n        data: serializeCategories(),\n        complete: function(){\n          $('.paginated_collection').effect('highlight');\n        }\n      });\n    }\n  });\n});\n","// File: application.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  $(document).ready(function() {\n    var batch_actions_selector;\n    $(document).on('focus', '.datepicker:not(.hasDatepicker)', function() {\n      var defaults, options;\n      defaults = {\n        dateFormat: 'yy-mm-dd'\n      };\n      options = $(this).data('datepicker-options');\n      return $(this).datepicker($.extend(defaults, options));\n    });\n    $('.clear_filters_btn').click(function() {\n      var params, regex;\n      params = window.location.search.split('&');\n      regex = /^(q\\[|q%5B|q%5b|page|commit)/;\n      return window.location.search = \"\";\n    });\n    $('.filter_form').submit(function() {\n      return $(this).find(':input').filter(function() {\n        return this.value === '';\n      }).prop('disabled', true);\n    });\n    $('.filter_form_field.select_and_search select').change(function() {\n      return $(this).siblings('input').prop({\n        name: \"q[\" + this.value + \"]\"\n      });\n    });\n    if ((batch_actions_selector = $('.table_tools .batch_actions_selector')).length) {\n      return batch_actions_selector.next().css({\n        width: \"calc(100% - 10px - \" + (batch_actions_selector.outerWidth()) + \"px)\",\n        'float': 'right'\n      });\n    }\n  });\n\n}).call(this);\n\n\n// File: base.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  window.ActiveAdmin = {};\n\n}).call(this);\n\n\n// File: batch_actions.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  $(document).on('ready page:load', function() {\n    $('#batch_actions_selector li a').click(function(e) {\n      var message, r;\n      e.stopPropagation();\n      e.preventDefault();\n      console.log('clicked it');\n      if (message = $(this).data('confirm')) {\n        r = window.confirm(message);\n        if (r === true) {\n          return $(this).trigger('confirm:complete', $(this).data('inputs'));\n        }\n      } else {\n        return $(this).trigger('confirm:complete');\n      }\n    });\n    $('#batch_actions_selector li a').on('confirm:complete', function(e, inputs) {\n      var val;\n      if (val = JSON.stringify(inputs)) {\n        $('#batch_action_inputs').val(val);\n      } else {\n        $('#batch_action_inputs').attr('disabled', 'disabled');\n      }\n      $('#batch_action').val($(this).data('action'));\n      return $('#collection_selection').submit();\n    });\n    if ($(\"#batch_actions_selector\").length && $(\":checkbox.toggle_all\").length) {\n      if ($(\".paginated_collection\").find(\"table.index_table\").length) {\n        $(\".paginated_collection table\").tableCheckboxToggler();\n      } else {\n        $(\".paginated_collection\").checkboxToggler();\n      }\n      return $(\".paginated_collection\").find(\":checkbox\").bind(\"change\", function() {\n        if ($(\".paginated_collection\").find(\":checkbox\").filter(\":checked\").length > 0) {\n          return $(\"#batch_actions_selector\").aaDropdownMenu(\"enable\");\n        } else {\n          return $(\"#batch_actions_selector\").aaDropdownMenu(\"disable\");\n        }\n      });\n    }\n  });\n\n}).call(this);\n\n\n// File: checkbox-toggler.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  ActiveAdmin.CheckboxToggler = (function() {\n    function CheckboxToggler(options, container) {\n      var defaults;\n      this.options = options;\n      this.container = container;\n      defaults = {};\n      this.options = $.extend(defaults, this.options);\n      this._init();\n      this._bind();\n    }\n\n    CheckboxToggler.prototype._init = function() {\n      if (!this.container) {\n        throw new Error('Container element not found');\n      } else {\n        this.$container = $(this.container);\n      }\n      if (!this.$container.find('.toggle_all').length) {\n        throw new Error('\"toggle all\" checkbox not found');\n      } else {\n        this.toggle_all_checkbox = this.$container.find('.toggle_all');\n      }\n      return this.checkboxes = this.$container.find(':checkbox').not(this.toggle_all_checkbox);\n    };\n\n    CheckboxToggler.prototype._bind = function() {\n      this.checkboxes.change((function(_this) {\n        return function(e) {\n          return _this._didChangeCheckbox(e.target);\n        };\n      })(this));\n      return this.toggle_all_checkbox.change((function(_this) {\n        return function() {\n          return _this._didChangeToggleAllCheckbox();\n        };\n      })(this));\n    };\n\n    CheckboxToggler.prototype._didChangeCheckbox = function(checkbox) {\n      switch (this.checkboxes.filter(':checked').length) {\n        case this.checkboxes.length - 1:\n          return this.toggle_all_checkbox.prop({\n            checked: null\n          });\n        case this.checkboxes.length:\n          return this.toggle_all_checkbox.prop({\n            checked: true\n          });\n      }\n    };\n\n    CheckboxToggler.prototype._didChangeToggleAllCheckbox = function() {\n      var setting;\n      setting = this.toggle_all_checkbox.prop('checked') ? true : null;\n      return this.checkboxes.each((function(_this) {\n        return function(index, el) {\n          $(el).prop({\n            checked: setting\n          });\n          return _this._didChangeCheckbox(el);\n        };\n      })(this));\n    };\n\n    return CheckboxToggler;\n\n  })();\n\n  $.widget.bridge('checkboxToggler', ActiveAdmin.CheckboxToggler);\n\n}).call(this);\n\n\n// File: dropdown-menu.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  ActiveAdmin.DropdownMenu = (function() {\n    function DropdownMenu(options, element) {\n      var defaults;\n      this.options = options;\n      this.element = element;\n      this.$element = $(this.element);\n      defaults = {\n        fadeInDuration: 20,\n        fadeOutDuration: 100,\n        onClickActionItemCallback: null\n      };\n      this.options = $.extend(defaults, this.options);\n      this.isOpen = false;\n      this.$menuButton = this.$element.find('.dropdown_menu_button');\n      this.$menuList = this.$element.find('.dropdown_menu_list_wrapper');\n      this._buildMenuList();\n      this._bind();\n    }\n\n    DropdownMenu.prototype.open = function() {\n      this.isOpen = true;\n      this.$menuList.fadeIn(this.options.fadeInDuration);\n      this._position();\n      return this;\n    };\n\n    DropdownMenu.prototype.close = function() {\n      this.isOpen = false;\n      this.$menuList.fadeOut(this.options.fadeOutDuration);\n      return this;\n    };\n\n    DropdownMenu.prototype.destroy = function() {\n      this.$element.unbind();\n      this.$element = null;\n      return this;\n    };\n\n    DropdownMenu.prototype.isDisabled = function() {\n      return this.$menuButton.hasClass('disabled');\n    };\n\n    DropdownMenu.prototype.disable = function() {\n      return this.$menuButton.addClass('disabled');\n    };\n\n    DropdownMenu.prototype.enable = function() {\n      return this.$menuButton.removeClass('disabled');\n    };\n\n    DropdownMenu.prototype.option = function(key, value) {\n      if ($.isPlainObject(key)) {\n        return this.options = $.extend(true, this.options, key);\n      } else if (key != null) {\n        return this.options[key];\n      } else {\n        return this.options[key] = value;\n      }\n    };\n\n    DropdownMenu.prototype._buildMenuList = function() {\n      this.$nipple = $('<div class=\"dropdown_menu_nipple\"></div>');\n      this.$menuList.prepend(this.$nipple);\n      return this.$menuList.hide();\n    };\n\n    DropdownMenu.prototype._bind = function() {\n      $('body').click((function(_this) {\n        return function() {\n          if (_this.isOpen) {\n            return _this.close();\n          }\n        };\n      })(this));\n      return this.$menuButton.click((function(_this) {\n        return function() {\n          if (!_this.isDisabled()) {\n            if (_this.isOpen) {\n              _this.close();\n            } else {\n              _this.open();\n            }\n          }\n          return false;\n        };\n      })(this));\n    };\n\n    DropdownMenu.prototype._position = function() {\n      var button_center, button_left, button_right, centered_menu_left, centered_menu_right, menu_center, nipple_center, window_right;\n      this.$menuList.css('top', this.$menuButton.position().top + this.$menuButton.outerHeight() + 10);\n      button_left = this.$menuButton.position().left;\n      button_center = this.$menuButton.outerWidth() / 2;\n      button_right = button_left + button_center * 2;\n      menu_center = this.$menuList.outerWidth() / 2;\n      nipple_center = this.$nipple.outerWidth() / 2;\n      window_right = $(window).width();\n      centered_menu_left = button_left + button_center - menu_center;\n      centered_menu_right = button_left + button_center + menu_center;\n      if (centered_menu_left < 0) {\n        this.$menuList.css('left', button_left);\n        return this.$nipple.css('left', button_center - nipple_center);\n      } else if (centered_menu_right > window_right) {\n        this.$menuList.css('right', window_right - button_right);\n        return this.$nipple.css('right', button_center - nipple_center);\n      } else {\n        this.$menuList.css('left', centered_menu_left);\n        return this.$nipple.css('left', menu_center - nipple_center);\n      }\n    };\n\n    return DropdownMenu;\n\n  })();\n\n  $.widget.bridge('aaDropdownMenu', ActiveAdmin.DropdownMenu);\n\n  $(document).on('ready page:load', function() {\n    return $('.dropdown_menu').aaDropdownMenu();\n  });\n\n}).call(this);\n\n\n// File: flash.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var Flash;\n\n  ActiveAdmin.flash = Flash = (function() {\n    Flash.error = function(message, close_after) {\n      return new this(message, \"error\", close_after);\n    };\n\n    Flash.notice = function(message, close_after) {\n      return new this(message, \"notice\", close_after);\n    };\n\n    Flash.prototype.reference = function() {\n      return this.reference;\n    };\n\n    function Flash(message1, type1, close_after) {\n      this.message = message1;\n      this.type = type1 != null ? type1 : \"notice\";\n      this.reference = jQuery(\"<div>\").addClass(\"flash flash_\" + type).text(message);\n      jQuery(\".flashes\").append(this.reference);\n      if (close_after != null) {\n        this.close_after(close_after);\n      }\n    }\n\n    Flash.prototype.close_after = function(close_after) {\n      return setTimeout((function(_this) {\n        return function() {\n          return _this.close();\n        };\n      })(this), close_after * 1000);\n    };\n\n    Flash.prototype.close = function() {\n      return this.reference.remove();\n    };\n\n    return Flash;\n\n  })();\n\n}).call(this);\n\n\n// File: has_many.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var init_sortable, recompute_positions;\n\n  $(function() {\n    $(document).on('click', 'a.button.has_many_remove', function(e) {\n      var parent, to_remove;\n      e.preventDefault();\n      parent = $(this).closest('.has_many_container');\n      to_remove = $(this).closest('fieldset');\n      recompute_positions(parent);\n      parent.trigger('has_many_remove:before', [to_remove, parent]);\n      to_remove.remove();\n      return parent.trigger('has_many_remove:after', [to_remove, parent]);\n    });\n    $(document).on('click', 'a.button.has_many_add', function(e) {\n      var before_add, fieldset, html, index, parent, regex;\n      e.preventDefault();\n      parent = $(this).closest('.has_many_container');\n      parent.trigger(before_add = $.Event('has_many_add:before'), [parent]);\n      if (!before_add.isDefaultPrevented()) {\n        index = parent.data('has_many_index') || parent.children('fieldset').length - 1;\n        parent.data({\n          has_many_index: ++index\n        });\n        regex = new RegExp($(this).data('placeholder'), 'g');\n        html = $(this).data('html').replace(regex, index);\n        fieldset = $(html).insertBefore(this);\n        recompute_positions(parent);\n        return parent.trigger('has_many_add:after', [fieldset, parent]);\n      }\n    });\n    $(document).on('change', '.has_many_container[data-sortable] :input[name$=\"[_destroy]\"]', function() {\n      return recompute_positions($(this).closest('.has_many'));\n    });\n    init_sortable();\n    return $(document).on('has_many_add:after', '.has_many_container', init_sortable);\n  });\n\n  init_sortable = function() {\n    var elems;\n    elems = $('.has_many_container[data-sortable]:not(.ui-sortable)');\n    elems.sortable({\n      items: '> fieldset',\n      handle: '> ol > .handle',\n      stop: recompute_positions\n    });\n    return elems.each(recompute_positions);\n  };\n\n  recompute_positions = function(parent) {\n    var input_name, position;\n    parent = parent instanceof jQuery ? parent : $(this);\n    input_name = parent.data('sortable');\n    position = parseInt(parent.data('sortable-start') || 0, 10);\n    return parent.children('fieldset').each(function() {\n      var destroy_input, sortable_input;\n      destroy_input = $(this).find(\"> ol > .input > :input[name$='[_destroy]']\");\n      sortable_input = $(this).find(\"> ol > .input > :input[name$='[\" + input_name + \"]']\");\n      if (sortable_input.length) {\n        return sortable_input.val(destroy_input.is(':checked') ? '' : position++);\n      }\n    });\n  };\n\n}).call(this);\n\n\n// File: modal_dialog.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  ActiveAdmin.modal_dialog = function(message, inputs, callback) {\n    var elem, html, klass, name, opts, ref, ref1, type, v, wrapper;\n    html = \"<form id=\\\"dialog_confirm\\\" title=\\\"\" + message + \"\\\"><ul>\";\n    for (name in inputs) {\n      type = inputs[name];\n      if (/^(datepicker|checkbox|text)$/.test(type)) {\n        wrapper = 'input';\n      } else if (type === 'textarea') {\n        wrapper = 'textarea';\n      } else if ($.isArray(type)) {\n        ref = ['select', 'option', type, ''], wrapper = ref[0], elem = ref[1], opts = ref[2], type = ref[3];\n      } else {\n        throw new Error(\"Unsupported input type: {\" + name + \": \" + type + \"}\");\n      }\n      klass = type === 'datepicker' ? type : '';\n      html += (\"<li>\\n<label>\" + (name.charAt(0).toUpperCase() + name.slice(1)) + \"</label>\\n<\" + wrapper + \" name=\\\"\" + name + \"\\\" class=\\\"\" + klass + \"\\\" type=\\\"\" + type + \"\\\">\") + (opts ? ((function() {\n        var i, len, results;\n        results = [];\n        for (i = 0, len = opts.length; i < len; i++) {\n          v = opts[i];\n          if ($.isArray(v)) {\n            results.push(\"<\" + elem + \" value=\" + v[1] + \">\" + v[0] + \"</\" + elem + \">\");\n          } else {\n            results.push(\"<\" + elem + \">\" + v + \"</\" + elem + \">\");\n          }\n        }\n        return results;\n      })()).join('') : '') + (\"</\" + wrapper + \">\") + \"</li>\";\n      ref1 = [], wrapper = ref1[0], elem = ref1[1], opts = ref1[2], type = ref1[3], klass = ref1[4];\n    }\n    html += \"</ul></form>\";\n    return $(html).appendTo('body').dialog({\n      modal: true,\n      dialogClass: 'active_admin_dialog',\n      buttons: {\n        OK: function() {\n          callback($(this).serializeObject());\n          return $(this).dialog('close');\n        },\n        Cancel: function() {\n          return $(this).dialog('close').remove();\n        }\n      }\n    });\n  };\n\n}).call(this);\n\n\n// File: per_page.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  ActiveAdmin.PerPage = (function() {\n    function PerPage(options, element) {\n      this.options = options;\n      this.element = element;\n      this.$element = $(this.element);\n      this._init();\n      this._bind();\n    }\n\n    PerPage.prototype._init = function() {\n      return this.$params = this._queryParams();\n    };\n\n    PerPage.prototype._bind = function() {\n      return this.$element.change((function(_this) {\n        return function() {\n          _this.$params['per_page'] = _this.$element.val();\n          delete _this.$params['page'];\n          return location.search = $.param(_this.$params);\n        };\n      })(this));\n    };\n\n    PerPage.prototype._queryParams = function() {\n      var m, params, query, re;\n      query = window.location.search.substring(1);\n      params = {};\n      re = /([^&=]+)=([^&]*)/g;\n      while (m = re.exec(query)) {\n        params[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);\n      }\n      return params;\n    };\n\n    return PerPage;\n\n  })();\n\n  $.widget.bridge('perPage', ActiveAdmin.PerPage);\n\n  $(function() {\n    return $('.pagination_per_page select').perPage();\n  });\n\n}).call(this);\n\n\n// File: popover.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  ActiveAdmin.Popover = (function() {\n    function Popover(options1, element) {\n      var defaults;\n      this.options = options1;\n      this.element = element;\n      this.$element = $(this.element);\n      defaults = {\n        fadeInDuration: 20,\n        fadeOutDuration: 100,\n        autoOpen: true,\n        pageWrapperElement: \"#wrapper\",\n        onClickActionItemCallback: null\n      };\n      this.options = $.extend(defaults, options);\n      this.isOpen = false;\n      if (!(this.$popover = $(this.$element.attr('href'))).length) {\n        this.$popover = this.$element.next('.popover');\n      }\n      this._buildPopover();\n      this._bind();\n    }\n\n    Popover.prototype.open = function() {\n      this.isOpen = true;\n      this.$popover.fadeIn(this.options.fadeInDuration);\n      this._positionPopover();\n      this._positionNipple();\n      return this;\n    };\n\n    Popover.prototype.close = function() {\n      this.isOpen = false;\n      this.$popover.fadeOut(this.options.fadeOutDuration);\n      return this;\n    };\n\n    Popover.prototype.destroy = function() {\n      this.$element.removeData('popover');\n      this.$element.unbind();\n      this.$element = null;\n      return this;\n    };\n\n    Popover.prototype._buildPopover = function() {\n      this.$nipple = $('<div class=\"popover_nipple\"></div>');\n      this.$popover.prepend(this.$nipple);\n      this.$popover.hide();\n      return this.$popover.addClass('popover');\n    };\n\n    Popover.prototype._bind = function() {\n      $(this.options.pageWrapperElement).click((function(_this) {\n        return function() {\n          if (_this.isOpen) {\n            return _this.close();\n          }\n        };\n      })(this));\n      if (this.options.autoOpen) {\n        return this.$element.click((function(_this) {\n          return function(e) {\n            e.stopPropagation();\n            if (_this.isOpen) {\n              return _this.close();\n            } else {\n              return _this.open();\n            }\n          };\n        })(this));\n      }\n    };\n\n    Popover.prototype._positionPopover = function() {\n      var button_center, popover_center;\n      button_center = this.$element.offset().left + this.$element.outerWidth() / 2;\n      popover_center = this.$popover.outerWidth() / 2;\n      return this.$popover.css('left', button_center - popover_center);\n    };\n\n    Popover.prototype._positionNipple = function() {\n      this.$popover.css('top', this.$element.offset().top + this.$element.outerHeight() + 10);\n      return this.$nipple.css('left', this.$popover.outerWidth() / 2 - this.$nipple.outerWidth() / 2);\n    };\n\n    return Popover;\n\n  })();\n\n  $.widget.bridge('popover', ActiveAdmin.Popover);\n\n}).call(this);\n\n\n// File: table-checkbox-toggler.js.js\n// Generated by CoffeeScript 1.10.0\n(function() {\n  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ActiveAdmin.TableCheckboxToggler = (function(superClass) {\n    extend(TableCheckboxToggler, superClass);\n\n    function TableCheckboxToggler() {\n      return TableCheckboxToggler.__super__.constructor.apply(this, arguments);\n    }\n\n    TableCheckboxToggler.prototype._init = function() {\n      return TableCheckboxToggler.__super__._init.apply(this, arguments);\n    };\n\n    TableCheckboxToggler.prototype._bind = function() {\n      TableCheckboxToggler.__super__._bind.apply(this, arguments);\n      return this.$container.find('tbody td').click((function(_this) {\n        return function(e) {\n          if (e.target.type !== 'checkbox') {\n            return _this._didClickCell(e.target);\n          }\n        };\n      })(this));\n    };\n\n    TableCheckboxToggler.prototype._didChangeCheckbox = function(checkbox) {\n      var $row;\n      TableCheckboxToggler.__super__._didChangeCheckbox.apply(this, arguments);\n      $row = $(checkbox).parents('tr');\n      if (checkbox.checked) {\n        return $row.addClass('selected');\n      } else {\n        return $row.removeClass('selected');\n      }\n    };\n\n    TableCheckboxToggler.prototype._didClickCell = function(cell) {\n      return $(cell).parent('tr').find(':checkbox').click();\n    };\n\n    return TableCheckboxToggler;\n\n  })(ActiveAdmin.CheckboxToggler);\n\n  $.widget.bridge('tableCheckboxToggler', ActiveAdmin.TableCheckboxToggler);\n\n}).call(this);\n\n\n","/*\n        BestInPlace (for jQuery)\n        version: 0.1.0 (01/01/2011)\n        @requires jQuery >= v1.4\n        @requires jQuery.purr to display pop-up windows\n\n        By Bernat Farrero based on the work of Jan Varwig.\n        Examples at http://bernatfarrero.com\n\n        Licensed under the MIT:\n          http://www.opensource.org/licenses/mit-license.php\n\n        Usage:\n\n        Attention.\n        The format of the JSON object given to the select inputs is the following:\n        [[\"key\", \"value\"],[\"key\", \"value\"]]\n        The format of the JSON object given to the checkbox inputs is the following:\n        [\"falseValue\", \"trueValue\"]\n*/\n\nfunction BestInPlaceEditor(e) {\n  this.element = e;\n  this.initOptions();\n  this.bindForm();\n  this.initNil();\n  jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n}\n\nBestInPlaceEditor.prototype = {\n  // Public Interface Functions //////////////////////////////////////////////\n\n  activate : function() {\n    var to_display = \"\";\n    if (this.isNil) {\n      to_display = \"\";\n    }\n    else if (this.original_content) {\n      to_display = this.original_content;\n    }\n    else {\n      if (this.sanitize) {\n        to_display = this.element.text();\n      } else {\n        to_display = this.element.html();\n      }\n    }\n\n    var elem = this.isNil ? \"-\" : this.sanitize ? this.element.text() : this.element.html();\n    this.oldValue = elem;\n    this.display_value = to_display;\n    jQuery(this.activator).unbind(\"click\", this.clickHandler);\n    this.activateForm();\n    this.element.trigger(jQuery.Event(\"best_in_place:activate\"));\n  },\n\n  abort : function() {\n    if (this.isNil) this.element.text(this.nil);\n    else            this.element.text(this.oldValue);\n    jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n    this.element.trigger(jQuery.Event(\"best_in_place:abort\"));\n    this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n  },\n\n  abortIfConfirm : function () {\n    if (!this.useConfirm) {\n      this.abort();\n      return;\n    }\n\n    if (confirm(\"Are you sure you want to discard your changes?\")) {\n      this.abort();\n    }\n  },\n\n  update : function() {\n    var editor = this;\n    if (this.formType in {\"input\":1, \"textarea\":1} && this.getValue() == this.oldValue)\n    { // Avoid request if no change is made\n      this.abort();\n      return true;\n    }\n    this.isNil = false;\n    editor.ajax({\n      \"type\"       : \"post\",\n      \"dataType\"   : \"text\",\n      \"data\"       : editor.requestData(),\n      \"success\"    : function(data){ editor.loadSuccessCallback(data); },\n      \"error\"      : function(request, error){ editor.loadErrorCallback(request, error); }\n    });\n    if (this.formType == \"select\") {\n      var value = this.getValue();\n      this.previousCollectionValue = value;\n\n      jQuery.each(this.values, function(i, v) {\n        if (value == v[0]) {\n          editor.element.html(v[1]);\n        }\n      }\n    );\n    } else if (this.formType == \"checkbox\") {\n      editor.element.html(this.getValue() ? this.values[1] : this.values[0]);\n    } else {\n      editor.element.text(this.getValue() !== \"\" ? this.getValue() : this.nil);\n    }\n    editor.element.trigger(jQuery.Event(\"best_in_place:update\"));\n  },\n\n  activateForm : function() {\n    alert(\"The form was not properly initialized. activateForm is unbound\");\n  },\n\n  // Helper Functions ////////////////////////////////////////////////////////\n\n  initOptions : function() {\n    // Try parent supplied info\n    var self = this;\n    self.element.parents().each(function(){\n      $parent = jQuery(this);\n      self.url           = self.url           || $parent.attr(\"data-url\");\n      self.collection    = self.collection    || $parent.attr(\"data-collection\");\n      self.formType      = self.formType      || $parent.attr(\"data-type\");\n      self.objectName    = self.objectName    || $parent.attr(\"data-object\");\n      self.attributeName = self.attributeName || $parent.attr(\"data-attribute\");\n      self.activator     = self.activator     || $parent.attr(\"data-activator\");\n      self.okButton      = self.okButton      || $parent.attr(\"data-ok-button\");\n      self.cancelButton  = self.cancelButton  || $parent.attr(\"data-cancel-button\");\n      self.nil           = self.nil           || $parent.attr(\"data-nil\");\n      self.inner_class   = self.inner_class   || $parent.attr(\"data-inner-class\");\n      self.html_attrs    = self.html_attrs    || $parent.attr(\"data-html-attrs\");\n      self.original_content    = self.original_content    || $parent.attr(\"data-original-content\");\n      self.collectionValue = self.collectionValue || $parent.attr(\"data-value\");\n    });\n\n    // Try Rails-id based if parents did not explicitly supply something\n    self.element.parents().each(function(){\n      var res = this.id.match(/^(\\w+)_(\\d+)$/i);\n      if (res) {\n        self.objectName = self.objectName || res[1];\n      }\n    });\n\n    // Load own attributes (overrides all others)\n    self.url           = self.element.attr(\"data-url\")           || self.url      || document.location.pathname;\n    self.collection    = self.element.attr(\"data-collection\")    || self.collection;\n    self.formType      = self.element.attr(\"data-type\")          || self.formtype || \"input\";\n    self.objectName    = self.element.attr(\"data-object\")        || self.objectName;\n    self.attributeName = self.element.attr(\"data-attribute\")     || self.attributeName;\n    self.activator     = self.element.attr(\"data-activator\")     || self.element;\n    self.okButton      = self.element.attr(\"data-ok-button\")     || self.okButton;\n    self.cancelButton  = self.element.attr(\"data-cancel-button\") || self.cancelButton;\n    self.nil           = self.element.attr(\"data-nil\")           || self.nil      || \"-\";\n    self.inner_class   = self.element.attr(\"data-inner-class\")   || self.inner_class   || null;\n    self.html_attrs    = self.element.attr(\"data-html-attrs\")    || self.html_attrs;\n    self.original_content    = self.element.attr(\"data-original-content\") || self.original_content;\n    self.collectionValue     = self.element.attr(\"data-value\")            || self.collectionValue;\n\n    if (!self.element.attr(\"data-sanitize\")) {\n      self.sanitize = true;\n    }\n    else {\n      self.sanitize = (self.element.attr(\"data-sanitize\") == \"true\");\n    }\n\n    if (!self.element.attr(\"data-use-confirm\")) {\n      self.useConfirm = true;\n    } else {\n      self.useConfirm = (self.element.attr(\"data-use-confirm\") != \"false\");\n    }\n\n    if ((self.formType == \"select\" || self.formType == \"checkbox\") && self.collection !== null)\n    {\n      self.values = jQuery.parseJSON(self.collection);\n    }\n\n  },\n\n  bindForm : function() {\n    this.activateForm = BestInPlaceEditor.forms[this.formType].activateForm;\n    this.getValue     = BestInPlaceEditor.forms[this.formType].getValue;\n  },\n\n  initNil: function() {\n    if (this.element.text() === \"\")\n    {\n      this.isNil = true;\n      this.element.text(this.nil);\n    }\n  },\n\n  getValue : function() {\n    alert(\"The form was not properly initialized. getValue is unbound\");\n  },\n\n  // Trim and Strips HTML from text\n  sanitizeValue : function(s) {\n   return jQuery.trim(s);\n  },\n\n  /* Generate the data sent in the POST request */\n  requestData : function() {\n    // To prevent xss attacks, a csrf token must be defined as a meta attribute\n    csrf_token = jQuery('meta[name=csrf-token]').attr('content');\n    csrf_param = jQuery('meta[name=csrf-param]').attr('content');\n\n    var data = \"_method=put\";\n    data += \"&\" + this.objectName + '[' + this.attributeName + ']=' + encodeURIComponent(this.getValue());\n\n    if (csrf_param !== undefined && csrf_token !== undefined) {\n      data += \"&\" + csrf_param + \"=\" + encodeURIComponent(csrf_token);\n    }\n    return data;\n  },\n\n  ajax : function(options) {\n    options.url = this.url;\n    options.beforeSend = function(xhr){ xhr.setRequestHeader(\"Accept\", \"application/json\"); };\n    return jQuery.ajax(options);\n  },\n\n  // Handlers ////////////////////////////////////////////////////////////////\n\n  loadSuccessCallback : function(data) {\n    try {\n      var response = jQuery.parseJSON(jQuery.trim(data));\n      if (response !== null && response.hasOwnProperty(\"display_as\")) {\n        this.element.attr(\"data-original-content\", this.element.text());\n        this.original_content = this.element.text();\n        this.element.text(response[\"display_as\"]);\n      }\n      this.element.trigger(jQuery.Event(\"ajax:success\"), data);\n\n      // Binding back after being clicked\n      jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n      this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n\n      if (this.collectionValue !== null) {\n        this.collectionValue = this.previousCollectionValue;\n        this.previousCollectionValue = null;\n      }\n    }\n    catch(err) {}\n  },\n\n  loadErrorCallback : function(request, error) {\n    this.element.text(this.oldValue);\n\n    this.element.trigger(jQuery.Event(\"best_in_place:error\"), [request, error])\n    this.element.trigger(jQuery.Event(\"ajax:error\"));\n\n    // Binding back after being clicked\n    jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n    this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n  },\n\n  clickHandler : function(event) {\n    event.preventDefault();\n    event.data.editor.activate();\n  },\n\n  setHtmlAttributes : function() {\n    var formField = this.element.find(this.formType);\n\n    try {\n      var attrs = jQuery.parseJSON(this.html_attrs);\n      for(var key in attrs){\n        formField.attr(key, attrs[key]);\n      }\n    }\n    catch(err) {}\n\n  }\n};\n\n\n// Button cases:\n// If no buttons, then blur saves, ESC cancels\n// If just Cancel button, then blur saves, ESC or clicking Cancel cancels (careful of blur event!)\n// If just OK button, then clicking OK saves (careful of blur event!), ESC or blur cancels\n// If both buttons, then clicking OK saves, ESC or clicking Cancel or blur cancels\nBestInPlaceEditor.forms = {\n  \"input\" : {\n    activateForm : function() {\n      var output = jQuery(document.createElement('form'))\n                   .addClass('form_in_place')\n                   .attr('action', 'javascript:void(0);')\n                   .attr('style', 'display:inline');\n      var input_elt = jQuery(document.createElement('input'))\n                      .attr('type', 'text')\n                      .attr('name', this.attributeName)\n                      .val(this.display_value);\n      if(this.inner_class !== null) {\n        input_elt.addClass(this.inner_class);\n      }\n      output.append(input_elt);\n      if(this.okButton) {\n        output.append(\n          jQuery(document.createElement('input'))\n          .attr('type', 'submit')\n          .attr('value', this.okButton)\n        )\n      }\n      if(this.cancelButton) {\n        output.append(\n          jQuery(document.createElement('input'))\n          .attr('type', 'button')\n          .attr('value', this.cancelButton)\n        )\n      }\n\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.element.find(\"input[type='text']\")[0].select();\n      this.element.find(\"form\").bind('submit', {editor: this}, BestInPlaceEditor.forms.input.submitHandler);\n      if (this.cancelButton) {\n        this.element.find(\"input[type='button']\").bind('click', {editor: this}, BestInPlaceEditor.forms.input.cancelButtonHandler);\n      }\n      this.element.find(\"input[type='text']\").bind('blur', {editor: this}, BestInPlaceEditor.forms.input.inputBlurHandler);\n      this.element.find(\"input[type='text']\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.input.keyupHandler);\n      this.blurTimer = null;\n      this.userClicked = false;\n    },\n\n    getValue : function() {\n      return this.sanitizeValue(this.element.find(\"input\").val());\n    },\n\n    // When buttons are present, use a timer on the blur event to give precedence to clicks\n    inputBlurHandler : function(event) {\n      if (event.data.editor.okButton) {\n        event.data.editor.blurTimer = setTimeout(function () {\n          if (!event.data.editor.userClicked) {\n            event.data.editor.abort();\n          }\n        }, 500);\n      } else {\n        if (event.data.editor.cancelButton) {\n          event.data.editor.blurTimer = setTimeout(function () {\n            if (!event.data.editor.userClicked) {\n              event.data.editor.update();\n            }\n          }, 500);\n        } else {\n          event.data.editor.update();\n        }\n      }\n    },\n\n    submitHandler : function(event) {\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.update();\n    },\n\n    cancelButtonHandler : function(event) {\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.abort();\n      event.stopPropagation(); // Without this, click isn't handled\n    },\n\n    keyupHandler : function(event) {\n      if (event.keyCode == 27) {\n        event.data.editor.abort();\n      }\n    }\n  },\n\n  \"date\" : {\n    activateForm : function() {\n      var that      = this,\n          output    = jQuery(document.createElement('form'))\n                      .addClass('form_in_place')\n                      .attr('action', 'javascript:void(0);')\n                      .attr('style', 'display:inline'),\n          input_elt = jQuery(document.createElement('input'))\n                      .attr('type', 'text')\n                      .attr('name', this.attributeName)\n                      .attr('value', this.sanitizeValue(this.display_value));\n      if(this.inner_class !== null) {\n        input_elt.addClass(this.inner_class);\n      }\n      output.append(input_elt)\n\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.element.find('input')[0].select();\n      this.element.find(\"form\").bind('submit', {editor: this}, BestInPlaceEditor.forms.input.submitHandler);\n      this.element.find(\"input\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.input.keyupHandler);\n\n      this.element.find('input')\n        .datepicker({\n            onClose: function() {\n              that.update();\n            }\n          })\n        .datepicker('show');\n    },\n\n    getValue :  function() {\n      return this.sanitizeValue(this.element.find(\"input\").val());\n    },\n\n    submitHandler : function(event) {\n      event.data.editor.update();\n    },\n\n    keyupHandler : function(event) {\n      if (event.keyCode == 27) {\n        event.data.editor.abort();\n      }\n    }\n  },\n\n  \"select\" : {\n    activateForm : function() {\n      var output     = jQuery(document.createElement('form'))\n                       .attr('action', 'javascript:void(0)')\n                       .attr('style', 'display:inline');\n          selected   = '',\n          oldValue   = this.oldValue,\n          select_elt = jQuery(document.createElement('select')),\n          currentCollectionValue = this.collectionValue;\n\n      jQuery.each(this.values, function (index, value) {\n        var option_elt = jQuery(document.createElement('option'))\n                         // .attr('value', value[0])\n                         .val(value[0])\n                         .html(value[1]);\n        if(value[0] == currentCollectionValue) {\n          option_elt.attr('selected', 'selected');\n        }\n        select_elt.append(option_elt);\n      });\n      output.append(select_elt);\n\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.element.find(\"select\").bind('change', {editor: this}, BestInPlaceEditor.forms.select.blurHandler);\n      this.element.find(\"select\").bind('blur', {editor: this}, BestInPlaceEditor.forms.select.blurHandler);\n      this.element.find(\"select\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.select.keyupHandler);\n      this.element.find(\"select\")[0].focus();\n    },\n\n    getValue : function() {\n      return this.sanitizeValue(this.element.find(\"select\").val());\n      // return this.element.find(\"select\").val();\n    },\n\n    blurHandler : function(event) {\n      event.data.editor.update();\n    },\n\n    keyupHandler : function(event) {\n      if (event.keyCode == 27) event.data.editor.abort();\n    }\n  },\n\n  \"checkbox\" : {\n    activateForm : function() {\n      var newValue = Boolean(this.oldValue.toLowerCase() != this.values[1].toLowerCase());\n      var output = newValue ? this.values[1] : this.values[0];\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.update();\n    },\n\n    getValue : function() {\n      return Boolean(this.element.html().toLowerCase() == this.values[1].toLowerCase());\n    }\n  },\n\n  \"textarea\" : {\n    activateForm : function() {\n      // grab width and height of text\n      width = this.element.css('width');\n      height = this.element.css('height');\n\n      // construct form\n      var output   = jQuery(document.createElement('form'))\n                     .attr('action', 'javascript:void(0)')\n                     .attr('style', 'display:inline')\n                     .append(jQuery(document.createElement('textarea'))\n                             .val(this.sanitizeValue(this.display_value)));\n      if(this.okButton) {\n        output.append(\n          jQuery(document.createElement('input'))\n          .attr('type', 'submit')\n          .attr('value', this.okButton)\n        );\n      }\n      if(this.cancelButton) {\n        output.append(\n          jQuery(document.createElement('input'))\n          .attr('type', 'button')\n          .attr('value', this.cancelButton)\n        )\n      }\n\n      this.element.html(output);\n      this.setHtmlAttributes();\n\n      // set width and height of textarea\n      jQuery(this.element.find(\"textarea\")[0]).css({ 'min-width': width, 'min-height': height });\n      jQuery(this.element.find(\"textarea\")[0]).elastic();\n\n      this.element.find(\"textarea\")[0].focus();\n      this.element.find(\"form\").bind('submit', {editor: this}, BestInPlaceEditor.forms.textarea.submitHandler);\n      if (this.cancelButton) {\n        this.element.find(\"input[type='button']\").bind('click', {editor: this}, BestInPlaceEditor.forms.textarea.cancelButtonHandler);\n      }\n      this.element.find(\"textarea\").bind('blur', {editor: this}, BestInPlaceEditor.forms.textarea.blurHandler);\n      this.element.find(\"textarea\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.textarea.keyupHandler);\n      this.blurTimer = null;\n      this.userClicked = false;\n    },\n\n    getValue :  function() {\n      return this.sanitizeValue(this.element.find(\"textarea\").val());\n    },\n\n    // When buttons are present, use a timer on the blur event to give precedence to clicks\n    blurHandler : function(event) {\n      if (event.data.editor.okButton) {\n        event.data.editor.blurTimer = setTimeout(function () {\n          if (!event.data.editor.userClicked) {\n            event.data.editor.abortIfConfirm();\n          }\n        }, 500);\n      } else {\n        if (event.data.editor.cancelButton) {\n          event.data.editor.blurTimer = setTimeout(function () {\n            if (!event.data.editor.userClicked) {\n              event.data.editor.update();\n            }\n          }, 500);\n        } else {\n          event.data.editor.update();\n        }\n      }\n    },\n\n    submitHandler : function(event) {\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.update();\n    },\n\n    cancelButtonHandler : function(event) {\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.abortIfConfirm();\n      event.stopPropagation(); // Without this, click isn't handled\n    },\n\n    keyupHandler : function(event) {\n      if (event.keyCode == 27) {\n        event.data.editor.abortIfConfirm();\n      }\n    }\n  }\n};\n\njQuery.fn.best_in_place = function() {\n\n  function setBestInPlace(element) {\n    if (!element.data('bestInPlaceEditor')) {\n      element.data('bestInPlaceEditor', new BestInPlaceEditor(element));\n      return true;\n    }\n  }\n\n  jQuery(this.context).delegate(this.selector, 'click', function () {\n    var el = jQuery(this);\n    if (setBestInPlace(el))\n      el.click();\n  });\n\n  this.each(function () {\n    setBestInPlace(jQuery(this));\n  });\n\n  return this;\n};\n\n\n\n/**\n* @name             Elastic\n* @descripton           Elastic is Jquery plugin that grow and shrink your textareas automaticliy\n* @version            1.6.5\n* @requires           Jquery 1.2.6+\n*\n* @author             Jan Jarfalk\n* @author-email         jan.jarfalk@unwrongest.com\n* @author-website         http://www.unwrongest.com\n*\n* @licens             MIT License - http://www.opensource.org/licenses/mit-license.php\n*/\n\n(function(jQuery){\n  jQuery.fn.extend({\n    elastic: function() {\n      //  We will create a div clone of the textarea\n      //  by copying these attributes from the textarea to the div.\n      var mimics = [\n        'paddingTop',\n        'paddingRight',\n        'paddingBottom',\n        'paddingLeft',\n        'fontSize',\n        'lineHeight',\n        'fontFamily',\n        'width',\n        'fontWeight'];\n\n      return this.each( function() {\n\n        // Elastic only works on textareas\n        if ( this.type != 'textarea' ) {\n          return false;\n        }\n\n        var $textarea = jQuery(this),\n          $twin   = jQuery('<div />').css({'position': 'absolute','display':'none','word-wrap':'break-word'}),\n          lineHeight  = parseInt($textarea.css('line-height'),10) || parseInt($textarea.css('font-size'),'10'),\n          minheight = parseInt($textarea.css('height'),10) || lineHeight*3,\n          maxheight = parseInt($textarea.css('max-height'),10) || Number.MAX_VALUE,\n          goalheight  = 0,\n          i       = 0;\n\n        // Opera returns max-height of -1 if not set\n        if (maxheight < 0) { maxheight = Number.MAX_VALUE; }\n\n        // Append the twin to the DOM\n        // We are going to meassure the height of this, not the textarea.\n        $twin.appendTo($textarea.parent());\n\n        // Copy the essential styles (mimics) from the textarea to the twin\n        i = mimics.length;\n        while(i--){\n          $twin.css(mimics[i].toString(),$textarea.css(mimics[i].toString()));\n        }\n\n\n        // Sets a given height and overflow state on the textarea\n        function setHeightAndOverflow(height, overflow){\n          curratedHeight = Math.floor(parseInt(height,10));\n          if($textarea.height() != curratedHeight){\n            $textarea.css({'height': curratedHeight + 'px','overflow':overflow});\n\n          }\n        }\n\n\n        // This function will update the height of the textarea if necessary\n        function update() {\n\n          // Get curated content from the textarea.\n          var textareaContent = $textarea.val().replace(/&/g,'&amp;').replace(/  /g, '&nbsp;').replace(/<|>/g, '&gt;').replace(/\\n/g, '<br />');\n\n          // Compare curated content with curated twin.\n          var twinContent = $twin.html().replace(/<br>/ig,'<br />');\n\n          if(textareaContent+'&nbsp;' != twinContent){\n\n            // Add an extra white space so new rows are added when you are at the end of a row.\n            $twin.html(textareaContent+'&nbsp;');\n\n            // Change textarea height if twin plus the height of one line differs more than 3 pixel from textarea height\n            if(Math.abs($twin.height() + lineHeight - $textarea.height()) > 3){\n\n              var goalheight = $twin.height()+lineHeight;\n              if(goalheight >= maxheight) {\n                setHeightAndOverflow(maxheight,'auto');\n              } else if(goalheight <= minheight) {\n                setHeightAndOverflow(minheight,'hidden');\n              } else {\n                setHeightAndOverflow(goalheight,'hidden');\n              }\n\n            }\n\n          }\n\n        }\n\n        // Hide scrollbars\n        $textarea.css({'overflow':'hidden'});\n\n        // Update textarea size on keyup, change, cut and paste\n        $textarea.bind('keyup change cut paste', function(){\n          update();\n        });\n\n        // Compact textarea on blur\n        // Lets animate this....\n        $textarea.bind('blur',function(){\n          if($twin.height() < maxheight){\n            if($twin.height() > minheight) {\n              $textarea.height($twin.height());\n            } else {\n              $textarea.height(minheight);\n            }\n          }\n        });\n\n        // And this line is to catch the browser paste event\n        $textarea.live('input paste',function(e){ setTimeout( update, 250); });\n\n        // Run update once when elastic is initialized\n        update();\n\n      });\n\n        }\n    });\n})(jQuery);\n","//= require jquery.purr\n\njQuery(document).on('best_in_place:error', function(event, request, error) {\n    // Display all error messages from server side validation\n    jQuery.each(jQuery.parseJSON(request.responseText), function(index, value) {\n      if( typeof(value) == \"object\") {value = index + \" \" + value.toString(); }\n      var container = jQuery(\"<span class='flash-error'></span>\").html(value);\n      container.purr();\n    });\n});\n","// Generated by CoffeeScript 1.9.1\n(function() {\n  jQuery(function() {\n    var do_confirm;\n    do_confirm = function(ptr) {\n      var message;\n      message = ptr.attr(\"data-confirm\");\n      if (message === void 0) {\n        return true;\n      }\n      return confirm(message);\n    };\n    $(\"a[data-remote]\").click(function(e) {\n      var csrfToken, href, jthis, method;\n      e.preventDefault;\n      jthis = $(this);\n      if (!do_confirm($(this))) {\n        return;\n      }\n      href = jthis.attr(\"href\") + \"?format=js\";\n      method = jthis.attr(\"data-method\");\n      csrfToken = $(\"#_csrf_token\").attr(\"content\");\n      $.ajax({\n        url: href,\n        dataType: \"script\"\n      });\n      return false;\n    });\n    $(\"a[data-method='delete'\").click(function(e) {\n      var href, id;\n      e.preventDefault();\n      if (!do_confirm($(this))) {\n        return;\n      }\n      href = $(this).attr(\"href\");\n      csrf = $(this).attr(\"data-csrf\");\n      id = \"delete_\" + href.replace(/\\//g, \"_\");\n      $(\"<form id='\" + id + \"' method='post' class='link' action='\" + href + \n        \"'> <input name='_method' value='delete' type='hidden' /> \" +\n        \"<input type='hidden' name='_csrf_token' value='\"+csrf+\"' /> \" + \n        \"</form>\").appendTo($(this).parent());\n      $(\"#\" + id).submit();\n      return false;\n    });\n    $(\"a[data-method='post'\").click(function(e) {\n      var href, id;\n      e.preventDefault();\n      if (!do_confirm($(this))) {\n        return;\n      }\n      href = $(this).attr(\"href\");\n      id = \"post_\" + href.replace(/\\//g, \"_\");\n      $(\"<form id='\" + id + \"' method='post' class='link' action='\" + href + \"'></form>\").appendTo($(this).parent());\n      $(\"#\" + id).submit();\n      return false;\n    });\n    return $(\"a[data-method='put'\").click(function(e) {\n      var href, id;\n      e.preventDefault();\n      if (!do_confirm($(this))) {\n        return;\n      }\n      href = $(this).attr(\"href\");\n      id = \"post_\" + href.replace(/\\//g, \"_\");\n      $(\"<form id='\" + id + \"' method='post' class='link' action='\" + href + \"'> <input name='_method' value='put' type='hidden' /> </form>\").appendTo($(this).parent());\n      $(\"#\" + id).submit();\n      return false;\n    });\n  });\n\n}).call(this);\n"]}